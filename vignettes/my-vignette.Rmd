---
title: "Get started with Roma"
author: "Klara Kaleb"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Get started with Roma}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

This little vignette shows you how to get started with the `roma` package. roma is a wrapper for the REST API for the Orthologous MAtrix project (OMA) which is a  database for the inference of orthologs among complete genomes. 

For more details on the OMA project, see https://omabrowser.org/oma/home/ .

## Some useful functions
The package contains a range of functions that are used to query the database in an R friendly way. This vignette describes some of them, whereas the rest are described in more detail in other vignettes.


###getXref
This function searches the OMA database for entries containing the pattern defined and returns the results in a dataframe. Hence, it is usually a good starting place. Sample code is below.

```{r, warning=FALSE, message=FALSE}
library(roma)

results <- getXref(pattern="MAL")

results
```

###getGenomeAlignment
This function serves to obtain the orthologs for 2 whole genomes. The result is a dataframe containing information on each member in the pair and their relationship. 

```{r, warning=FALSE, message=FALSE}
library(roma)

alignment <- getGenomeAlignment(genome_id1 = "YEAST", genome_id2 = "ASHGO")

head(alignment)

```

###getData
This master-function function serves to obtain the information for a single entry in a database - either a group, protein or a genome. The data type is specified by setting the "type" argument and a specific entry by its ID - below are the possible ID's for different object type.

* Protein
	* oma id 
	* canonical id
	* entry number - release specific

* Genome
	* NCBI taxon id
	* UniProt species code

* Group
	* group number
	* group fingerprint
	* id of one of its members



The result is an S3 Object, attributes of which can be accessed via $. Below is an example of obtaining information for a specific OMA group.

```{r, warning=FALSE, message=FALSE}
library(roma)

group <- getData(type="Group",id="YEAST58")

group$fingerprint


```

###resolveURL
In most cases there is great quantity of information available for a given entry and this impacts the data retrival time. Due to this, the information available for such entries in split into a number of endpoints and these are included appropriatelly as redirects. This function allows the user to obtain further information behind those urls. 

###formatData
When an object is created from the corresponding response to a request, its data is returned in the simplest most form to speed up loading time. This sometimes results in very long named lists which can be a challenge to read - the purpose of this function is to format those lists in an appropriate dataframe. 

One can see some of the above functions in action in the below example of trying to obtain the list of orthologs for a protein entry.

```{r, warning=FALSE, message=FALSE}
library(roma)

protein <- getData(type="Protein",id="YEAST58")

attributes(protein)

protein$orthologs

orthologs = resolveURL(protein$orthologs)

head(orthologs)

formatted_orthologs = formatData(orthologs)

```

For further information on the OMA REST API please visit ([OMA REST API DOCUMENTATION](http://omadev.cs.ucl.ac.uk/api/docs)).

